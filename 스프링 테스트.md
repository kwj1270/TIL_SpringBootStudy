# 테스트란? 
테스트는 엔터프라이즈 소프트웨어 개발의 필수적인 부분입니다.   
특히 최근에는 많은 기업들에서 TDD, 즉 테스트 주도 개발을 지향하고 있습니다.     

# TDD
테스트 주도 개발은 익스트림 프로그래밍 개발 방법론의 실청 방안중 하나입니다.     
개발이 이루어진 후 잘 완성되었는지 테스트 케이스를 작성하고 테스트를 하는 방식과 달리       
테스트 케이스를 먼저 작성한 다음 테스트 케이스에 맞추어 실제 개발 단계로 이행하는 개발방법론을 의미합니다.   
즉, 테스트 케이스에 이상이 생기면 다시 코드를 수정하고 개선하는 과정을 반복하는 방법을 의미합니다.       
이름 그대로 테스트가 중점이되어 코드 개발을 주도한다고 생각하시면 되겠습니다.      
    
참고 : http://www.incodom.kr/spring/Spring_Test
  
# 스프링 테스트 및 스프링 부트 테스트       
`스프링 테스트`는 애플리케이션을 테스트 할 때 도움이되는 여러 유틸리티와 주석을 제공합니다.       
특히 `스프링 부트 테스트` 같은 경우 `spring-boot-starter-test` 스타터를 제공해줌으로써      
기존 '스프링 테스트' 를 구성하는 핵심 기능을 포함한 `spring-boot-test`와     
스프링 테스트를 위한 환경을 자동으로 구성할 수 있는 `spring-boot-test-autoconfigure`을 지원합니다.       

* spring boot : spring-boot-starter-test 제공 
    * spring-boot-test : 스프링 테스트 핵심 기능 포함
    * spring-boot-test-autoconfigure : 스프링 테스트 환경을 자동 구성 
    
이외에도 `spring-boot-starter-test`는 여러 유용한 테스트 라이브러리를 한번에 지원해줍니다.        
       
**스프링 테스트 지원**
* JUnit 4: 자바 테스트 환경에서의 사실상 표준으로 가장 많이 사용되고 있습니다. 
    * 스프링 부트 2.2.0 에서는 공식적으로 Junit5를 기본 디펜던시로 설정된다.   
* Spring Test & Spring Boot Test: 스프링과 스프링 부트 테스트에 대한 유용한 기능 및 통합 테스트를 지원해줍니다. 
* AssertJ: fluent assertion 회사의 라이브러리를 제공해줍니다.
* Hamcrest: matcher 객체의 라이브러리를 지원합니다. (제약 조건 객체)
* Mockito: 테스트 프레임워크 중 하나인 Mockito 프레임워크(단위 테스트에 유용)를 지원해줍니다.   
* JSONassert: JSON용 assertion 라이브러리를 지원합니다. 
    * assertion : 프로그래밍 안에서의 표명, 가정 설정문 즉, 프로그램 안에 추가하는 참·거짓을 미리 가정하는 문입니다. 
* JsonPath: JSON용 XPath를 지원합니다.

# 테스트 전략 
스프링은 다양한 테스트 전략을 제공하고 있습니다.       
특히 `슬라이스 테스트 - slice test`를 지원하여 특정 레이어에 대한 테스트를 지원해줍니다.       
'슬라이스 테스트'는 해당 레이어에 불필요한 설정을 사용하지 않도록 하여 테스트를 보다 효율적으로 진행하도록 도와줍니다.     
(관련된 Bean만 최소한으로 등록시켜 테스트 하고자 하는 부분에 최대한 단위 테스트를 지원합니다.)       
        
|어노테이션|설명|부모 클래스|Bean|   
|----|----|----|----|
|@SpringBootTest|통합 테스트, 전체|IntegrationTest|Bean전체|
|@WebMvcTest|통합 테스트-슬라이스 테스트, Mvc 테스트|IntegrationTest|Mvc 관련된 Bean|
|@DataJpaTest|통합 테스트-슬라이스 테스트, Jpa 테스트|IntegrationTest|JPA 관련된 Bean|
|None|단위 테스트, Service 테스트|MockTest|None|
|None|POJO 테스트, 도메인 테스트|None|None|

```
|@RestClientTest|단위 테스트, Service 테스트|MockTest|None|
|@JsonTest|단위 테스트, Service 테스트|MockTest|None|
```
      
* **단위 테스트와 슬라이스 테스트는 같은 의미? :**     
단위 테스트는 말 그대로 가장 작은 단위이기에 다른 Dependency가 없는 상황에서 실행할 수 있는 테스트입니다.       
즉, 스프링을 실행시키거나 다른 서비스를 연동하여 사용하는 경우 '단위 테스트'라고 말하기는 힘듭니다.            
그렇기에 필자는 단위 테스트와 슬라이스 테스트를 구분하여 사용할 것 입니다.(현재 저도 배우는 입장이라)       
이 부분에 대해서는 개인의 주관이 크게 작용하므로 맞다 틀리다가 아니라 이러한 관점도 있다고 이해하면 좋겠습니다.           
   
## @SpringBootTest 통합 테스트 
@SpringBootTest 어노테이션    
기존에 사용하던 ContextConfiguration의 대안으로,     
@SpringBootTest 를 선언함으로써 ApplicationContext 를 생성하여 작동합니다.   
@RunWith(SpringRunner.class)와 함께 사용합니다. 

## @RunWith  
@RunWith(SpringRunner.class)


### 장단점


**장점**    
* 모든 Bean을 올리고 테스트를 진행하기 때문에 쉽게 테스트 진행 가능 
* 모든 Bean을 올리고 테스트를 진행하기 때문에 **운영환경과 가장 유사하게 테스트 가능** 
* API를 테스트할 경우 요청부터 응답까지 전체적인 테스트 진행 가능  

**단점**    
* 모든 Bean을 올리고 테스트를 진행하기 때문에 **테스트 시간이 오래걸림**
* 테스트의 단위가 크기 때문에 테스트 실패시 디버깅이 어려움 
* 외부 API 콜 같은 RollBack 처리가 안되는 테스트 진행하기 어려움  



     
     











